namespace: demo-demo
name: srv-webapp-demo

service:
  name: nginx
  image: docker.io/library/nginx:alpine
  replicas: 2
  envs:
    pairs:
      key1: value1
    files:
      - foo.yml
    configmaps:
      - srv-webapp-demo-envs:true
    secrets:
      - srv-webapp-demo-envs:false

  ports:
    - "80:8080" # cluster ip
    - "udp://!9998:8889" # 随机 nodeport
    # - "!20080:80:8080" # 指定 nodeport

ingress:
  annotations:
    k1: v1
    k2: v2
  rules:
    - http://api.example.com/ping?tls=star-example-com&svc=srv-webapp-demo:8080
    - http://api.balala.com/*


# https://kubectl.docs.kubernetes.io/references/kustomize/kustomization/configmapgenerator/
configmaps:
  envs:
    - name: srv-webapp-demo-envs
      files:
        - foo.yml

# https://kubectl.docs.kubernetes.io/references/kustomize/kustomization/secretgenerator/
secrets:
  literals:
    - name: srv-webapp-demo-literals
      files:
        - foo.yml
      # type: Opaque # default
  files:
    - name: srv-webapp-demo-files
      files:
      - tls.crt=catsecret/tls.crt
      - tls.key=secret/tls.key
      type: "kubernetes.io/tls"